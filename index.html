<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>Foody ‚Äî –º–∏–Ω–∏‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</title>
  <link rel="stylesheet" href="./styles.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">üçΩÔ∏è Foody</div>
    <nav class="tabs">
      <button id="tabBuyer" class="tab active">–ü–æ–∫—É–ø–∞—Ç–µ–ª—é</button>
      <button id="tabMerchant" class="tab">–†–µ—Å—Ç–æ—Ä–∞–Ω (–õ–ö)</button>
    </nav>
  </header>

  <!-- –ü–æ–∫—É–ø–∞—Ç–µ–ª—å -->
  <main id="buyerView">
    <section class="panel">
      <div class="row">
        <label for="citySelect">–ì–æ—Ä–æ–¥</label>
        <select id="citySelect"></select>
        <button id="refreshBuyer" class="btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
      </div>
      <div id="buyerEmpty" class="empty hidden">–ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π –≥–æ—Ä–æ–¥ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–û–±–Ω–æ–≤–∏—Ç—å¬ª.</div>
      <div id="buyerList" class="grid"></div>
    </section>
  </main>

  <!-- –†–µ—Å—Ç–æ—Ä–∞–Ω (–õ–ö) -->
  <main id="merchantView" class="hidden">
    <section class="panel">
      <div id="restInfo" class="muted">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
      <div id="profileBanner" class="banner hidden">
        <div>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å (—Ç–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å –∏ –≥–æ—Ä–æ–¥), —á—Ç–æ–±—ã –≤–∞—Å –≤–∏–¥–µ–ª–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏.</div>
        <button id="settingsBtn" class="btn">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
      </div>
      <div class="row gap">
        <button id="loginBtn" class="btn secondary hidden">–í–æ–π—Ç–∏</button>
        <button id="logoutBtn" class="btn danger">–í—ã–π—Ç–∏</button>
        <button id="settingsBtn2" class="btn">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
      </div>
    </section>

    <section class="panel">
      <h3>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</h3>
      <form id="createForm" class="form">
        <div class="grid2">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ <input id="title" required maxlength="80"></label>
          <label>–¶–µ–Ω–∞ (‚ÇΩ) <input id="price" type="number" min="0" step="1" required></label>
          <label>–û–ø–∏—Å–∞–Ω–∏–µ <textarea id="desc" rows="2" maxlength="280"></textarea></label>
          <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ <input id="qty" type="number" min="1" step="1" required value="1"></label>
          <label>–î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ <input id="expires" type="datetime-local"></label>
          <label>–§–æ—Ç–æ <input id="photo" type="file" accept="image/*"></label>
        </div>
        <button class="btn" type="submit">–°–æ–∑–¥–∞—Ç—å</button>
      </form>
    </section>

    <section class="panel">
      <div class="row between">
        <h3>–í–∞—à–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h3>
        <input id="search" class="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é">
      </div>
      <div id="empty" class="empty hidden">–ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.</div>
      <div id="offers" class="grid"></div>
    </section>

    <section class="panel">
      <h3>–ë—Ä–æ–Ω–∏</h3>
      <div class="row">
        <label for="resFilter">–§–∏–ª—å—Ç—Ä</label>
        <select id="resFilter">
          <option value="all">–í—Å–µ</option>
          <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
          <option value="redeemed">–í—ã–¥–∞–Ω—ã</option>
          <option value="expired">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω—ã</option>
        </select>
      </div>
      <div id="resEmpty" class="empty">–ü–æ–∫–∞ –Ω–µ—Ç –±—Ä–æ–Ω–µ–π.</div>
      <div class="tablewrap">
        <table id="resTable" class="table">
          <thead>
            <tr><th>–ö–æ–¥</th><th>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</th><th>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</th><th>–°—Ç–∞—Ç—É—Å</th><th>–î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ</th><th>–°–æ–∑–¥–∞–Ω–æ</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- –ú–æ–¥–∞–ª –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
  <dialog id="settingsModal" class="dialog">
    <div class="dialog-header">
      <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
      <button id="settingsClose" class="iconbtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
    </div>

    <div id="tipsCallout" class="callout hidden"></div>

    <div class="block">
      <h4>–ê–∫—Ç–∏–≤–Ω—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω</h4>
      <select id="restSelect"></select>
      <button id="saveSettings" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>

    <div class="block">
      <h4>–ë—ã—Å—Ç—Ä–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</h4>
      <div class="row">
        <input id="newRestName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, ¬´–ë—É—Ä–≥–µ—Ä & –ö–æ—Ñ–µ¬ª">
        <button id="createRestBtn" class="btn">–°–æ–∑–¥–∞—Ç—å</button>
      </div>
    </div>
  </dialog>

  <!-- –ú–æ–¥–∞–ª –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ñ—Ñ–µ—Ä -->
  <dialog id="editModal" class="dialog">
    <div class="dialog-header">
      <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</h3>
      <button id="editClose" class="iconbtn">‚úï</button>
    </div>
    <form id="editForm" class="form">
      <input id="editId" type="hidden">
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ <input id="editTitle" required maxlength="80"></label>
      <label>–û–ø–∏—Å–∞–Ω–∏–µ <textarea id="editDesc" rows="2" maxlength="280"></textarea></label>
      <label>–¶–µ–Ω–∞ <input id="editPrice" type="number" min="0" step="1"></label>
      <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ <input id="editQty" type="number" min="0" step="1"></label>
      <label>–î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ <input id="editExpires" type="datetime-local"></label>
      <label>–§–æ—Ç–æ <input id="editPhoto" type="file" accept="image/*"></label>
      <button class="btn" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </form>
  </dialog>

  <button id="addFloating" class="fab">Ôºã</button>
  <div id="toast" class="toast hidden"></div>

  <script src="./rest_bootstrap.js"></script>
  <script src="./rest.js"></script>
</body>
</html>
